<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Demystifying the Kubernetes Iceberg: Part 8 | Anton Sankov's Blog</title>
<meta name=description content='Kubernetes is like an iceberg. You learn the basics, only to see there is a lot more to learn. The more you learn, the more you see there is to know. This series of articles explains all the concepts listed in the "Kubernetes Iceberg" diagram by Flant.'><meta property="og:url" content="https://asankov.dev/blog/2022/07/11/demystifying-the-kubernetes-iceberg-part-8/"><meta property="og:site_name" content="Anton Sankov's Blog"><meta property="og:title" content="Demystifying the Kubernetes Iceberg: Part 8"><meta property="og:description" content='Kubernetes is like an iceberg. You learn the basics, only to see there is a lot more to learn. The more you learn, the more you see there is to know. This series of articles explains all the concepts listed in the "Kubernetes Iceberg" diagram by Flant.'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-07-11T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-10T12:45:30+03:00"><meta itemprop=name content="Demystifying the Kubernetes Iceberg: Part 8"><meta itemprop=description content='Kubernetes is like an iceberg. You learn the basics, only to see there is a lot more to learn. The more you learn, the more you see there is to know. This series of articles explains all the concepts listed in the "Kubernetes Iceberg" diagram by Flant.'><meta itemprop=datePublished content="2022-07-11T00:00:00+00:00"><meta itemprop=dateModified content="2022-07-10T12:45:30+03:00"><meta itemprop=wordCount content="448"><meta itemprop=keywords content="Kubernetes"><meta name=twitter:card content="summary"><meta name=twitter:title content="Demystifying the Kubernetes Iceberg: Part 8"><meta name=twitter:description content='Kubernetes is like an iceberg. You learn the basics, only to see there is a lot more to learn. The more you learn, the more you see there is to know. This series of articles explains all the concepts listed in the "Kubernetes Iceberg" diagram by Flant.'><link rel=preload href=/scss/main.min.7afdf8df464bda87b7202cb1259549e2a2b0fd4c5c55c9f15f73426c5b305b15.css as=style integrity="sha256-ev3430ZL2oe3ICyxJZVJ4qKw/UxcVcnxX3NCbFswWxU=" crossorigin=anonymous><link href=/scss/main.min.7afdf8df464bda87b7202cb1259549e2a2b0fd4c5c55c9f15f73426c5b305b15.css rel=stylesheet integrity="sha256-ev3430ZL2oe3ICyxJZVJ4qKw/UxcVcnxX3NCbFswWxU=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7Y9WXX1393"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7Y9WXX1393")}</script></head><body class="td-page td-blog"><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Anton Sankov's Blog</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/cv/><span>CV</span></a></li><li class=nav-item><a class=nav-link href=/about/><span>About Me</span></a></li></ul></div><div class="d-none d-lg-block"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blog-li><a href=/blog/ title="Anton Sankov's Blog" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-blog><span>Blog</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023011390daysofdevops-continuous-build-integration-and-testing-li><a href=/blog/2023/01/13/90daysofdevops-continuous-build-integration-and-testing/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023011390daysofdevops-continuous-build-integration-and-testing><span>90DaysOfDevOps - Continuous Build, Integration and Testing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20221222implementing-the-java-stream-api-with-go-generics-part-1-li><a href=/blog/2022/12/22/implementing-the-java-stream-api-with-go-generics-part-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20221222implementing-the-java-stream-api-with-go-generics-part-1><span>Implementing the Java Stream API with Go Generics: Part 1</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-blog20220711demystifying-the-kubernetes-iceberg-part-8-li><a href=/blog/2022/07/11/demystifying-the-kubernetes-iceberg-part-8/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-blog20220711demystifying-the-kubernetes-iceberg-part-8><span class=td-sidebar-nav-active-item>Demystifying the Kubernetes Iceberg: Part 8</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220704demystifying-the-kubernetes-iceberg-part-7-li><a href=/blog/2022/07/04/demystifying-the-kubernetes-iceberg-part-7/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220704demystifying-the-kubernetes-iceberg-part-7><span>Demystifying the Kubernetes Iceberg: Part 7</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220627demystifying-the-kubernetes-iceberg-part-6-li><a href=/blog/2022/06/27/demystifying-the-kubernetes-iceberg-part-6/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220627demystifying-the-kubernetes-iceberg-part-6><span>Demystifying the Kubernetes Iceberg: Part 6</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220612demystifying-the-kubernetes-iceberg-part-5-li><a href=/blog/2022/06/12/demystifying-the-kubernetes-iceberg-part-5/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220612demystifying-the-kubernetes-iceberg-part-5><span>Demystifying the Kubernetes Iceberg: Part 5</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220605demystifying-the-kubernetes-iceberg-part-4-li><a href=/blog/2022/06/05/demystifying-the-kubernetes-iceberg-part-4/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220605demystifying-the-kubernetes-iceberg-part-4><span>Demystifying the Kubernetes Iceberg: Part 4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220529demystifying-the-kubernetes-iceberg-part-3-li><a href=/blog/2022/05/29/demystifying-the-kubernetes-iceberg-part-3/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220529demystifying-the-kubernetes-iceberg-part-3><span>Demystifying the Kubernetes Iceberg: Part 3</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220522demystifying-the-kubernetes-iceberg-part-2-li><a href=/blog/2022/05/22/demystifying-the-kubernetes-iceberg-part-2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220522demystifying-the-kubernetes-iceberg-part-2><span>Demystifying the Kubernetes Iceberg: Part 2</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220515demystifying-the-kubernetes-iceberg-part-1-li><a href=/blog/2022/05/15/demystifying-the-kubernetes-iceberg-part-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220515demystifying-the-kubernetes-iceberg-part-1><span>Demystifying the Kubernetes Iceberg: Part 1</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220421securing-kubernetes-with-open-policy-agent-li><a href=/blog/2022/04/21/securing-kubernetes-with-open-policy-agent/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220421securing-kubernetes-with-open-policy-agent><span>Securing Kubernetes with Open Policy Agent</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220129different-ways-to-initialize-go-structs-li><a href=/blog/2022/01/29/different-ways-to-initialize-go-structs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220129different-ways-to-initialize-go-structs><span>Different Ways to Initialize Go structs</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#tier-8>Tier 8</a><ul><li><a href=#patching-control-plane-components>Patching control-plane components</a></li><li><a href=#keps>KEPs</a></li><li><a href=#directly-interacting-with-etcd>Directly interacting with etcd</a></li></ul></li><li><a href=#summary>Summary</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Categories</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://asankov.dev/categories/devops/ data-taxonomy-term=devops><span class=taxonomy-label>DevOps</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://asankov.dev/categories/gatekeeper/ data-taxonomy-term=gatekeeper><span class=taxonomy-label>Gatekeeper</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://asankov.dev/categories/go/ data-taxonomy-term=go><span class=taxonomy-label>Go</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://asankov.dev/categories/kubernetes/ data-taxonomy-term=kubernetes><span class=taxonomy-label>Kubernetes</span><span class=taxonomy-count>9</span></a></li><li><a class=taxonomy-term href=https://asankov.dev/categories/open-policy-agent/ data-taxonomy-term=open-policy-agent><span class=taxonomy-label>Open Policy Agent</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://asankov.dev/categories/security/ data-taxonomy-term=security><span class=taxonomy-label>Security</span><span class=taxonomy-count>2</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><div class=td-content><h1>Demystifying the Kubernetes Iceberg: Part 8</h1><div class=lead>Kubernetes is like an iceberg. You learn the basics, only to see there is a lot more to learn. The more you learn, the more you see there is to know. This series of articles explains all the concepts listed in the &ldquo;Kubernetes Iceberg&rdquo; diagram by Flant.</div><div class="td-byline mb-4"><time datetime=2022-07-11 class=text-body-secondary>Monday, July 11, 2022</time></div><header class=article-meta><div class="taxonomy taxonomy-terms-article taxo-categories"><h5 class=taxonomy-title>Categories:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://asankov.dev/categories/kubernetes/ data-taxonomy-term=kubernetes><span class=taxonomy-label>Kubernetes</span></a></li></ul></div><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 3 minute read &nbsp;</p></header><p>This is the eighth article of the &ldquo;Demystifying the Kubernetes Iceberg&rdquo; series.
My goal for this series is to explain all concepts mentioned in the &ldquo;Kubernetes Iceberg&rdquo; diagram by <a href=https://flant.com/>Flant</a>.</p><p>This is the iceberg:</p><p><img alt="The Kubernetes Iceberg meme" src=/images/kubernetes-iceberg.png></p><p>In this article, we will look at Tier 8 of the iceberg.
This is the last tier of the iceberg, and it&rsquo;s pretty tiny.
It lists just three concepts.</p><p>You can find the other articles here:</p><ul><li><a href=/blog/2022/05/15/demystifying-the-kubernetes-iceberg-part-1/>Part 1</a></li><li><a href=/blog/2022/05/22/demystifying-the-kubernetes-iceberg-part-2/>Part 2</a></li><li><a href=/blog/2022/05/22/demystifying-the-kubernetes-iceberg-part-3/>Part 3</a></li><li><a href=/blog/2022/06/05/demystifying-the-kubernetes-iceberg-part-4/>Part 4</a></li><li><a href=/blog/2022/06/12/demystifying-the-kubernetes-iceberg-part-5/>Part 5</a></li><li><a href=/blog/2022/06/27/demystifying-the-kubernetes-iceberg-part-6/>Part 6</a></li><li><a href=/blog/2022/07/04/demystifying-the-kubernetes-iceberg-part-7/>Part 7</a></li></ul><p>This is the last article of this series.</p><h2 id=tier-8>Tier 8</h2><h3 id=patching-control-plane-components>Patching control-plane components</h3><p>A Kubernetes cluster consists of multiple control-plane components that power up the cluster.</p><p>When you are upgrading your Kubernetes cluster to a new version, you are upgrading all of these components to the respective version.</p><p>However, sometimes you might want to patch just a single component (for example, the <code>scheduler</code>).</p><p>This can be done in multiple ways.</p><p>If you have installed your cluster via <code>kubeadm</code>, you can also use <code>kubeadm</code> for upgrade and <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/control-plane-flags/#patches>patching</a>.</p><p>Another option, although not a recommended one, would be to manually go to your cluster (for example, via <code>ssh</code>) and patch all instances of this component by hand.</p><h3 id=keps>KEPs</h3><p><a href=https://github.com/kubernetes/enhancements/blob/master/keps/README.md>KEP</a> stands for Kubernetes Enhancement Proposal.</p><p>It is how the Kubernetes community/team handles discussion for new features or major changes in Kubernetes.</p><p>Anyone that wishes to propose one should write a KEP, which will be reviewed and discussed within the community.</p><h3 id=directly-interacting-with-etcd>Directly interacting with etcd</h3><p><a href=https://etcd.io/><code>etcd</code></a> is a distributed key-value store.
By default, Kubernetes uses etcd as the place where all data is persisted.
For example, when we create a Pod resource, that gets persisted into etcd.</p><p>It is a good practice to never directly interact with your <code>etcd</code> database and let only the API server do that.</p><p>However, if you really want to do it, you absolutely can.</p><p>This can be done in multiple <a href=https://etcd.io/docs/v3.5/tutorials/how-to-access-etcd/>ways</a>.</p><h4 id=etcdctl>etcdctl</h4><p>One is to use the <code>etcdctl</code> CLI client.</p><p>This command writes the value <code>"Hello world!"</code> to the `foo&rsquo; key:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>etcdctl --endpoints<span style=color:#719e07>=</span><span style=color:#268bd2>$ENDPOINTS</span> put foo <span style=color:#2aa198>&#34;Hello, World!&#34;</span>
</span></span></code></pre></div><p><code>$ENDPOINTS</code> is the <code>etcd</code> address(es).</p><p>After you have written the value, you can retrieve it by:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ etcdctl --endpoints<span style=color:#719e07>=</span><span style=color:#268bd2>$ENDPOINTS</span> get foo
</span></span><span style=display:flex><span>Hello, world!
</span></span></code></pre></div><h4 id=client-libraries>Client libraries</h4><p>Another way is to use a client library to write a program that interacts with <code>etcd</code>.</p><p>A complete list of <code>etcd</code> client libraries can be found <a href=https://etcd.io/docs/v3.5/integrations/#libraries>here</a>.</p><h2 id=summary>Summary</h2><p>This is all for part eight and this series.</p><p>Thank you to all my readers for sharing this journey with me.
I had great fun writing these articles and learned a lot.
I hope you did too.</p><p>If you don&rsquo;t want to miss my articles, you can follow me on <a href=https://twitter.com/a_sankov>Twitter</a> or <a href=https://www.linkedin.com/in/asankov/>LinkedIn</a>.</p><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/blog/2022/07/04/demystifying-the-kubernetes-iceberg-part-7/ aria-label="Previous - Demystifying the Kubernetes Iceberg: Part 7" class="btn btn-primary"><span class=me-1>←</span>Previous</a></li><li><a href=/blog/2022/12/22/implementing-the-java-stream-api-with-go-generics-part-1/ aria-label="Next - Implementing the Java Stream API with Go Generics: Part 1" class="btn btn-primary">Next<span class=ms-1>→</span></a></li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=mailto:asankov96@gmail.com aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Bluesky aria-label=Bluesky><a target=_blank rel=noopener href=https://bsky.app/profile/asankov.dev aria-label=Bluesky><i class="fa-brands fa-bluesky"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Threads aria-label=Threads><a target=_blank rel=noopener href=https://www.threads.net/@a.sankov aria-label=Threads><i class="fa-brands fa-threads"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/asankov aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=LinkedIn aria-label=LinkedIn><a target=_blank rel=noopener href=https://linkedin.com/in/asankov aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2024
<span class=td-footer__authors>Anton Sankov</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></span><p class="td-footer__about mt-2"><a href=/about/>About Me</a></p></div></div></div></footer></div><script src=/js/main.min.825a08a36a50b712e046faa3779bee6ed314acb043ad1d5a09314e713af5cf6e.js integrity="sha256-gloIo2pQtxLgRvqjd5vubtMUrLBDrR1aCTFOcTr1z24=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>